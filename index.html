<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Heads-Up Clone</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.9.0/p5.min.js"></script>
  <style>
    html, body {
      margin: 0;
      padding: 0;
    }
    canvas {
      display: block;
    }
    #game {
      position: absolute;
      width: 100%;
      height: 100%;
      display: flex;
      justify-content: center;
      align-items: center;
    }
    #wordContainer {
      text-align: center;
    }
  </style>
</head>
<body>
  <div id="game">
    <canvas id="starfield"></canvas>
    <div id="wordContainer"></div>
  </div>
  <script>
let stars = [];
let speed = 0.1;
let wordContainer;
let words = ["apple", "banana", "cherry", "orange", "grape"];
let currentWordIndex = 0;
let currentWord;
let wordChangeTimer;

function setup() {
  createCanvas(windowWidth, windowHeight);
  for (let i = 0; i < 100; i++) {
    stars.push(new Star());
  }
  wordContainer = select('#wordContainer');
  currentWord = words[currentWordIndex];
  wordContainer.html(currentWord);

  // Set up the word change timer
  wordChangeTimer = setInterval(nextWord, 60000); // 60 seconds
}

function draw() {
  background(0);
  stars.forEach(star => {
    star.update();
    star.show();
  });
  wordContainer.style('color', 'white');
}

function windowResized() {
  resizeCanvas(windowWidth, windowHeight);
}

class Star {
  constructor() {
    this.x = random(width);
    this.y = random(height);
    this.z = random(width);
    this.pz = this.z;
  }

  update() {
    if (this.z > 0) {
      let tr = map(this.z, 0, width, 0.5, 0);
      this.x -= speed * (this.x - mouseX) * tr;
      this.y -= speed * (this.y - mouseY) * tr;
      this.z -= speed * 5;
      this.z = max(this.z, 0);
    } else {
      this.x = random(width);
      this.y = random(height);
      this.z = width;
      this.pz = this.z;
    }
  }

  show() {
    let sx = map(this.x / this.z, 0, 1, 0, width);
    let sy = map(this.y / this.z, 0, 1, 0, height);
    let r = map(this.z, 0, width, 2, 0);
    noStroke();
    fill(255);
    ellipse(sx, sy, r, r);
  }
}

// Function to update the word
function nextWord() {
  currentWordIndex++;
  if (currentWordIndex >= words.length) {
    currentWordIndex = 0;
  }
  currentWord = words[currentWordIndex];
  wordContainer.html(currentWord);
}

// Reset timer when word changes
function resetTimer() {
  clearInterval(wordChangeTimer);
  wordChangeTimer = setInterval(nextWord, 60000);
}

// Change word on mouse click
function mouseClicked() {
  nextWord();
  resetTimer();
}

// Optionally, add key press functionality
function keyPressed() {
  if (key === ' ') { // Spacebar as an example
    nextWord();
    resetTimer();
  }
}

  </script>
</body>
</html>